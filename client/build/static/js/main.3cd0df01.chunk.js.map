{"version":3,"sources":["assets/devdash.svg","contexts/UserContext.jsx","components/LoggedButton.jsx","App.jsx","index.js"],"names":["module","exports","UserContext","createContext","UserContextProvider","props","useState","user","setUser","setMessage","Provider","value","fetchUser","fetch","method","credentials","headers","accepts","then","response","console","log","status","json","responseJson","message","handleLogin","window","open","handleLogout","handleRedirect","to","children","LoggedButton","useContext","onClick","Container","styled","div","background","App","setBackground","useCookies","setCookies","cookie","Cookies","useEffect","backgroundURL","get","tomorrow","Date","setDate","getDate","undefined","url","expires","getBackground","className","src","logo","alt","ReactDOM","render","CookiesProvider","document","getElementById"],"mappings":"oFAAAA,EAAOC,QAAU,IAA0B,qC,iMCG9BC,EAAcC,0BAqDZC,EAnDa,SAAAC,GAAU,IAAD,EACXC,qBADW,mBAC5BC,EAD4B,KACtBC,EADsB,OAELF,qBAFK,mBAEnBG,GAFmB,WAoCnC,OACE,kBAACP,EAAYQ,SAAb,CACEC,MAAO,CACLJ,OACAK,UApCY,WAChBC,MAAM,sBAAuB,CAC3BC,OAAQ,MACRC,YAAa,UACbC,QAAS,CACPC,QAAS,mBACT,eAAgB,mBAChB,oCAAoC,KAGrCC,MAAK,SAAAC,GAEJ,GADAC,QAAQC,IAAIF,GACY,MAApBA,EAASG,OAAgB,OAAOH,EAASI,UAE9CL,MAAK,SAAAM,GACJhB,EAAQgB,EAAajB,MACrBE,EAAWe,EAAaC,aAqBxBC,YAjBc,WAClBC,OAAOC,KAAK,qBAAsB,UAiB9BC,aAde,WACnBF,OAAOC,KAAK,eAAgB,UAcxBE,eAXiB,WACrB,OAAO,kBAAC,IAAD,CAAUC,GAAG,SAajB1B,EAAM2B,WCjCEC,EAfM,WAAO,IAAD,EAC8BC,qBACrDhC,GADMK,EADiB,EACjBA,KAAiBmB,GADA,EACXd,UADW,EACAc,aAAaG,EADb,EACaA,aAWtC,OANItB,EACI,4BAAQ4B,QAASN,GAAjB,UAEA,4BAAQM,QAAST,GAAjB,U,qUCsCV,IAAMU,EAAYC,IAAOC,IAAV,KAGY,SAAAjC,GAAK,OAAIA,EAAMkC,cAY3BC,EAxDf,WAAgB,IAAD,EACuBlC,qBADvB,mBACNiC,EADM,KACME,EADN,OAEgCC,YAAW,CAAC,eAF5C,mBAEGC,GAFH,WAGPC,GAHO,KAGE,IAAIC,KA0BnB,OALAC,qBAAU,YAnBY,WACpB,IAAMC,EAAgBH,EAAOI,IAAI,qBACjC5B,QAAQC,IAAIkB,EAAYQ,GACxB,IAAME,EAAW,IAAIC,KACrBD,EAASE,SAAQ,IAAID,MAAOE,UAAY,QAClBC,IAAlBN,EACFN,EAAcM,GAEdlC,MAAM,0DAA0DK,MAC9D,SAAAqB,GACEE,EAAcF,EAAWe,KACzBX,EAAW,oBAAqBJ,EAAWe,IAAK,CAC9CC,QAASN,OAQjBO,GACApC,QAAQC,IAAIkB,KACX,IAGD,kBAAC,EAAD,KACE,kBAACH,EAAD,CAAWG,WAAYA,GACrB,yBAAKkB,UAAU,aACb,yBAAKC,IAAKC,IAAMC,IAAI,mBAEtB,kBAAC,EAAD,S,QCtCRC,IAASC,OACP,kBAACC,EAAA,EAAD,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.3cd0df01.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/devdash.6c365d04.svg\";","import React, { createContext, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport const UserContext = createContext();\r\n\r\nconst UserContextProvider = props => {\r\n  const [user, setUser] = useState();\r\n  const [message, setMessage] = useState();\r\n\r\n  const fetchUser = () => {\r\n    fetch(\"/auth/login/success\", {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        accepts: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"Access-Control-Allow-Credentials\": true\r\n      }\r\n    })\r\n      .then(response => {\r\n        console.log(response);\r\n        if (response.status === 200) return response.json();\r\n      })\r\n      .then(responseJson => {\r\n        setUser(responseJson.user);\r\n        setMessage(responseJson.message);\r\n      });\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    window.open(\"/auth/login/google\", \"_self\");\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    window.open(\"/auth/logout\", \"_self\");\r\n  };\r\n\r\n  const handleRedirect = () => {\r\n    return <Redirect to=\"/\" />;\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider\r\n      value={{\r\n        user,\r\n        fetchUser,\r\n        handleLogin,\r\n        handleLogout,\r\n        handleRedirect\r\n      }}\r\n    >\r\n      {props.children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserContextProvider;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\n\r\nconst LoggedButton = () => {\r\n  const { user, fetchUser, handleLogin, handleLogout } = useContext(\r\n    UserContext\r\n  );\r\n\r\n  let btn;\r\n  if (user) {\r\n    btn = <button onClick={handleLogout}>Logout</button>;\r\n  } else {\r\n    btn = <button onClick={handleLogin}>Login</button>;\r\n  }\r\n\r\n  return btn;\r\n};\r\n\r\nexport default LoggedButton;\r\n","import React, { useState, useContext, useEffect } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport \"./App.css\";\nimport UserContextProvider from \"./contexts/UserContext\";\nimport LoggedButton from \"./components/LoggedButton\";\nimport styled from \"styled-components\";\nimport logo from \"./assets/devdash.svg\";\nimport { useCookies, Cookies } from \"react-cookie\";\n\nfunction App() {\n  const [background, setBackground] = useState();\n  const [cookies, setCookies, removeCookies] = useCookies([\"background\"]);\n  const cookie = new Cookies();\n\n  const getBackground = () => {\n    const backgroundURL = cookie.get(\"background-cookie\");\n    console.log(background, backgroundURL);\n    const tomorrow = new Date();\n    tomorrow.setDate(new Date().getDate() + 1);\n    if (backgroundURL !== undefined) {\n      setBackground(backgroundURL);\n    } else {\n      fetch(\"https://source.unsplash.com/1600x900/?background,relax\").then(\n        background => {\n          setBackground(background.url);\n          setCookies(\"background-cookie\", background.url, {\n            expires: tomorrow\n          });\n        }\n      );\n    }\n  };\n\n  useEffect(() => {\n    getBackground();\n    console.log(background);\n  }, []);\n\n  return (\n    <UserContextProvider>\n      <Container background={background}>\n        <div className=\"first-row\">\n          <img src={logo} alt=\"Dev dash logo\" />\n        </div>\n        <LoggedButton />\n      </Container>\n    </UserContextProvider>\n  );\n}\n\nconst Container = styled.div`\n  height: 100vh;\n  width: 100%;\n  background-image: url('${props => props.background}');\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  .first-row {\n    width: 90%;\n    img {\n      opacity: 0.8;\n    }\n  }\n`;\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\nimport { CookiesProvider } from \"react-cookie\";\n\nReactDOM.render(\n  <CookiesProvider>\n    <App />\n  </CookiesProvider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}