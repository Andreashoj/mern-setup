(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,n){e.exports=n(30)},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(15),l=n.n(o),r=(n(23),n(8)),u=n(5),s=(n(24),n(6)),i=Object(a.createContext)(),f=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),o=n[0],l=n[1],r=Object(a.useState)(),f=Object(s.a)(r,2),h=(f[0],f[1]);return c.a.createElement(i.Provider,{value:{user:o,fetchUser:function(){fetch("http://localhost:5000/auth/login/success",{method:"GET",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(console.log(e),200===e.status)return e.json()})).then((function(e){l(e.user),h(e.message)}))},handleLogin:function(){window.open("http://localhost:5000/auth/login/google","_self")},handleLogout:function(){window.open("http://localhost:5000/auth/logout","_self")},handleRedirect:function(){return c.a.createElement(u.a,{to:"/"})}}},e.children)},h=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)(!1)),o=Object(s.a)(n,2),l=(o[0],o[1],Object(a.useState)(null)),r=Object(s.a)(l,2),u=(r[0],r[1],Object(a.useState)(!1)),f=Object(s.a)(u,2),h=(f[0],f[1],Object(a.useContext)(i)),b=(h.user,h.fetchUser);return c.a.createElement("form",{action:"POST",onSubmit:function(e){return function(e){e.preventDefault()}(e)}},c.a.createElement("button",{onClick:function(){return b()}},"User?"))},b=function(){var e=Object(a.useContext)(i),t=e.user;e.fetchUser,e.handleRedirect;return Object(a.useEffect)((function(){console.log(t)}),[]),t?c.a.createElement("div",null,t.username):c.a.createElement(u.a,{to:"/"})},m=function(){var e=Object(a.useContext)(i),t=e.user,n=(e.fetchUser,e.handleLogin),o=e.handleLogout;return t?c.a.createElement("button",{onClick:o},"Logout"):c.a.createElement("button",{onClick:n},"Login")};var d=function(){return c.a.createElement(r.a,null,c.a.createElement(f,null,c.a.createElement("nav",null,c.a.createElement(r.b,{to:"/"},"Dashboard"),c.a.createElement(r.b,{to:"/secret"},"Secret"),c.a.createElement(m,null)),c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/secret"},c.a.createElement(b,null)),c.a.createElement(u.b,{path:"/"},c.a.createElement(h,null)))))};l.a.render(c.a.createElement(d,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.e5105ff3.chunk.js.map