(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{18:function(e,t,n){e.exports=n(30)},23:function(e,t,n){},24:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(15),r=n.n(o),l=(n(23),n(8)),u=n(5),s=(n(24),n(6)),i=Object(a.createContext)(),f=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),o=n[0],r=n[1],l=Object(a.useState)(),f=Object(s.a)(l,2),b=(f[0],f[1]);return c.a.createElement(i.Provider,{value:{user:o,fetchUser:function(){fetch("/auth/login/success",{method:"GET",credentials:"include",headers:{accepts:"application/json","Content-Type":"application/json","Access-Control-Allow-Credentials":!0}}).then((function(e){if(console.log(e),200===e.status)return e.json()})).then((function(e){r(e.user),b(e.message)}))},handleLogin:function(){window.open("/auth/login/google","_self")},handleLogout:function(){window.open("/auth/logout","_self")},handleRedirect:function(){return c.a.createElement(u.a,{to:"/"})}}},e.children)},b=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=(t[0],t[1],Object(a.useState)(!1)),o=Object(s.a)(n,2),r=(o[0],o[1],Object(a.useState)(null)),l=Object(s.a)(r,2),u=(l[0],l[1],Object(a.useState)(!1)),f=Object(s.a)(u,2),b=(f[0],f[1],Object(a.useContext)(i)),m=(b.user,b.fetchUser);return c.a.createElement("form",{action:"POST",onSubmit:function(e){return function(e){e.preventDefault()}(e)}},c.a.createElement("button",{onClick:function(){return m()}},"User?"))},m=function(){var e=Object(a.useContext)(i),t=e.user;e.fetchUser,e.handleRedirect;return Object(a.useEffect)((function(){console.log(t)}),[]),t?c.a.createElement("div",null,t.username):c.a.createElement(u.a,{to:"/"})},h=function(){var e=Object(a.useContext)(i),t=e.user,n=(e.fetchUser,e.handleLogin),o=e.handleLogout;return t?c.a.createElement("button",{onClick:o},"Logout"):c.a.createElement("button",{onClick:n},"Login")};var d=function(){return c.a.createElement(l.a,null,c.a.createElement(f,null,c.a.createElement("nav",null,c.a.createElement(l.b,{to:"/"},"Dashboard"),c.a.createElement(l.b,{to:"/secret"},"Secret"),c.a.createElement(h,null)),c.a.createElement(u.d,null,c.a.createElement(u.b,{path:"/secret"},c.a.createElement(m,null)),c.a.createElement(u.b,{path:"/"},c.a.createElement(b,null)))))};r.a.render(c.a.createElement(d,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.e7a73b37.chunk.js.map