{"version":3,"sources":["contexts/UserContext.jsx","components/RegisterForm.jsx","components/Secret.jsx","components/LoggedButton.jsx","App.jsx","index.js"],"names":["UserContext","createContext","UserContextProvider","props","useState","user","setUser","setMessage","Provider","value","fetchUser","fetch","method","credentials","headers","accepts","then","response","console","log","status","json","responseJson","message","handleLogin","window","open","handleLogout","handleRedirect","to","children","RegisterForm","useContext","action","onSubmit","e","preventDefault","handleSubmit","onClick","Secret","useEffect","username","LoggedButton","App","path","ReactDOM","render","document","getElementById"],"mappings":"gQAGaA,EAAcC,0BAqDZC,EAnDa,SAAAC,GAAU,IAAD,EACXC,qBADW,mBAC5BC,EAD4B,KACtBC,EADsB,OAELF,qBAFK,mBAEnBG,GAFmB,WAoCnC,OACE,kBAACP,EAAYQ,SAAb,CACEC,MAAO,CACLJ,OACAK,UApCY,WAChBC,MAAM,sBAAuB,CAC3BC,OAAQ,MACRC,YAAa,UACbC,QAAS,CACPC,QAAS,mBACT,eAAgB,mBAChB,oCAAoC,KAGrCC,MAAK,SAAAC,GAEJ,GADAC,QAAQC,IAAIF,GACY,MAApBA,EAASG,OAAgB,OAAOH,EAASI,UAE9CL,MAAK,SAAAM,GACJhB,EAAQgB,EAAajB,MACrBE,EAAWe,EAAaC,aAqBxBC,YAjBc,WAClBC,OAAOC,KAAK,qBAAsB,UAiB9BC,aAde,WACnBF,OAAOC,KAAK,eAAgB,UAcxBE,eAXiB,WACrB,OAAO,kBAAC,IAAD,CAAUC,GAAG,SAajB1B,EAAM2B,WC7BEC,EAnBM,WAAO,IAAD,EACO3B,mBAAS,IADhB,gCAEOA,oBAAS,IAFhB,gCAGCA,mBAAS,OAHV,gCAIiBA,oBAAS,IAJ1B,gCAUG4B,qBAAWhC,IAAzBU,GAVW,EAUjBL,KAViB,EAUXK,WAEd,OACE,0BAAMuB,OAAO,OAAOC,SAAU,SAAAC,GAAC,OAPZ,SAAAA,GACnBA,EAAEC,iBAMiCC,CAAaF,KAC9C,4BAAQG,QAAS,kBAAM5B,MAAvB,WCCS6B,EAdA,WAAO,IAAD,EACyBP,qBAAWhC,GAA/CK,EADW,EACXA,KADW,EACLK,UADK,EACMkB,eAMzB,OAJAY,qBAAU,WACRtB,QAAQC,IAAId,KACX,IAECA,EACK,6BAAMA,EAAKoC,UAEX,kBAAC,IAAD,CAAUZ,GAAG,OCITa,EAfM,WAAO,IAAD,EAC8BV,qBACrDhC,GADMK,EADiB,EACjBA,KAAiBmB,GADA,EACXd,UADW,EACAc,aAAaG,EADb,EACaA,aAWtC,OANItB,EACI,4BAAQiC,QAASX,GAAjB,UAEA,4BAAQW,QAASd,GAAjB,UCmBKmB,MAvBf,WACE,OACE,kBAAC,IAAD,KACE,kBAAC,EAAD,KACE,6BACE,kBAAC,IAAD,CAAMd,GAAG,KAAT,aACA,kBAAC,IAAD,CAAMA,GAAG,WAAT,UACA,kBAAC,EAAD,OAGF,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAOe,KAAK,WACV,kBAAC,EAAD,OAEF,kBAAC,IAAD,CAAOA,KAAK,KACV,kBAAC,EAAD,WClBZC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.e7a73b37.chunk.js","sourcesContent":["import React, { createContext, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nexport const UserContext = createContext();\r\n\r\nconst UserContextProvider = props => {\r\n  const [user, setUser] = useState();\r\n  const [message, setMessage] = useState();\r\n\r\n  const fetchUser = () => {\r\n    fetch(\"/auth/login/success\", {\r\n      method: \"GET\",\r\n      credentials: \"include\",\r\n      headers: {\r\n        accepts: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        \"Access-Control-Allow-Credentials\": true\r\n      }\r\n    })\r\n      .then(response => {\r\n        console.log(response);\r\n        if (response.status === 200) return response.json();\r\n      })\r\n      .then(responseJson => {\r\n        setUser(responseJson.user);\r\n        setMessage(responseJson.message);\r\n      });\r\n  };\r\n\r\n  const handleLogin = () => {\r\n    window.open(\"/auth/login/google\", \"_self\");\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    window.open(\"/auth/logout\", \"_self\");\r\n  };\r\n\r\n  const handleRedirect = () => {\r\n    return <Redirect to=\"/\" />;\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider\r\n      value={{\r\n        user,\r\n        fetchUser,\r\n        handleLogin,\r\n        handleLogout,\r\n        handleRedirect\r\n      }}\r\n    >\r\n      {props.children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n\r\nexport default UserContextProvider;\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\n\r\nconst RegisterForm = () => {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const { user, fetchUser } = useContext(UserContext);\r\n\r\n  return (\r\n    <form action=\"POST\" onSubmit={e => handleSubmit(e)}>\r\n      <button onClick={() => fetchUser()}>User?</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default RegisterForm;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst Secret = () => {\r\n  const { user, fetchUser, handleRedirect } = useContext(UserContext);\r\n\r\n  useEffect(() => {\r\n    console.log(user);\r\n  }, []);\r\n\r\n  if (user) {\r\n    return <div>{user.username}</div>;\r\n  } else {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n};\r\n\r\nexport default Secret;\r\n","import React, { useState, useContext, useEffect } from \"react\";\r\nimport { UserContext } from \"../contexts/UserContext\";\r\n\r\nconst LoggedButton = () => {\r\n  const { user, fetchUser, handleLogin, handleLogout } = useContext(\r\n    UserContext\r\n  );\r\n\r\n  let btn;\r\n  if (user) {\r\n    btn = <button onClick={handleLogout}>Logout</button>;\r\n  } else {\r\n    btn = <button onClick={handleLogin}>Login</button>;\r\n  }\r\n\r\n  return btn;\r\n};\r\n\r\nexport default LoggedButton;\r\n","import React, { useState, useContext } from \"react\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\nimport \"./App.css\";\nimport RegisterForm from \"./components/RegisterForm\";\nimport Secret from \"./components/Secret\";\nimport UserContextProvider from \"./contexts/UserContext\";\nimport LoggedButton from \"./components/LoggedButton\";\n\nfunction App() {\n  return (\n    <Router>\n      <UserContextProvider>\n        <nav>\n          <Link to=\"/\">Dashboard</Link>\n          <Link to=\"/secret\">Secret</Link>\n          <LoggedButton />\n        </nav>\n\n        <Switch>\n          <Route path=\"/secret\">\n            <Secret />\n          </Route>\n          <Route path=\"/\">\n            <RegisterForm />\n          </Route>\n        </Switch>\n      </UserContextProvider>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App.jsx\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}